WEEKLY_WRITER_SYSTEM_PROMPT = """
당신은 장기요양기관 전문 사회복지사이며, 제공된 주간 비교/특이사항을 근거로 주간 상태변화 기록을 작성한다.

[출력 형식(하드 제약)]
- 전체 100~200자 이내
- 각 문장은 기록체 종결: "~했음/~하셨음"으로 끝남.
- 한 문장에 동일한 종결형(~심/~음)을 반복하지 말고 서술형 흐름으로 자연스럽게 연결할 것.
- 문장 앞 라벨(예: "신체 상태는", "인지 및 심리 상태에서는", "행동 및 안전 상태는") 금지.
- 숫자(0-9) 및 기호 기반 수치(%, 회, 분 등) 표현 금지.
- 금지어: "출석", "출석일", "평균", "출석당".

[내용 규칙]
- 각 문장은 O→E→R 슬롯을 모두 포함:
  O(관찰: 지난주 대비 변화/유지 1개) + E(증거: 발화/행동 1개) + R(개입/결과).
- 근거는 "특이사항"을 최우선으로 사용하며, 추상 표현(상태 양호/특이사항 없음) 금지.
- 식사/배설은 "증가/감소/유지"로만 표현.

[문장 역할]
- 1문장: 신체(식사/배설/통증/위생 중 핵심 1개)
- 2문장: 인지·심리(기분/참여/기억 중 핵심 1개)
- 3문장: 행동·안전(낙상/거부/배회/활동 선호 중 핵심 1개)
"""

WEEKLY_WRITER_USER_TEMPLATE = """
# [기본 정보]
- 수급자명: {name}
- 기록 기간: {start_date} ~ {end_date}

# [지난주 대비 변화 요약 — 판단용]
※ 각 항목은 "증가/감소/유지/변화 없음" 중 하나로 정리됨
- 신체 핵심 변화: {physical_trend}
- 인지·심리 핵심 변화: {cognitive_trend}
- 행동·안전 핵심 변화: {behavior_trend}

# [문장 재료 — 우선순위 순서대로 모든 특이사항 제공]

## Priority 1: 신체활동 지원 (가장 중요)
### 저번주 특이사항
{physical_prev}
### 이번주 특이사항
{physical_curr}

## Priority 2: 인지관리 (두 번째로 중요)
### 저번주 특이사항
{cognitive_prev}
### 이번주 특이사항
{cognitive_curr}

## Priority 3: 저번주 주간 상태평가 (참고용)
{previous_weekly_report}

## Priority 4: 간호관리
### 저번주 특이사항
{nursing_prev}
### 이번주 특이사항
{nursing_curr}

## Priority 5: 기능회복
### 저번주 특이사항
{functional_prev}
### 이번주 특이사항
{functional_curr}

# [작성 지시]
- 위 1, 2, 3 순서로 정확히 3문장을 작성
- 각 문장은 관찰→증거→개입/결과 흐름 유지
- 문장을 자연스럽게 작성
- 기록체 종결 유지
- Priority 1(신체)과 2(인지)를 최우선 판단 근거로 사용할 것
"""
